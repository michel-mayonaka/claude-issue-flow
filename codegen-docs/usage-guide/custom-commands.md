# カスタムコマンド

Claude Code内で使用できるカスタムコマンド。

## /plan-issue

実装計画を対話的に立案してGitHub Issueを作成する。

**使用方法:**
```
/plan-issue <依頼内容>
```

**例:**
```
/plan-issue ユーザープロファイルページに編集機能を追加してほしい
```

**フロー:**
1. コードベースを調査
2. ユーザーと対話しながら詳細を詰める
3. 計画をMarkdown形式で出力
4. ユーザー承認後、ExitPlanModeを実行
5. hookによりGitHub Issueが自動作成される

**計画フォーマット:**
```markdown
# 計画: [タイトル]

## 概要
[実現すること]

## 背景
[変更の理由]

## 変更対象
- `path/to/file.ts`: [変更内容]

## 実装ステップ
1. [ステップ1]
2. [ステップ2]

## 受け入れ条件
- [ ] [条件1]
- [ ] [条件2]

## 確認方法
[テストコマンドや確認手順]

## 注意事項
- [注意点]
```

**重要:** 計画は`# 計画:` で始める必要があります。このフォーマットがないとIssue作成されません。

---

## /commit

変更をレビューしてコミット・プッシュする。

**使用方法:**
```
/commit
```

**実行内容:**
1. `git status`で変更確認
2. ドキュメント整合性チェック
3. テスト整合性チェック
4. テスト実行（コード変更時）
5. 問題なければコミット＆プッシュ

**問題検出時:**
問題を発見した場合は以下を実行：
1. 具体的な問題箇所を指摘
2. 修正案を提案
3. コミットせずに停止
4. ユーザーに判断を仰ぐ

**コミットメッセージ規約:**
```
<type>: <説明>

[本文（任意）]

Co-Authored-By: Claude <noreply@anthropic.com>
```

**Type一覧:**
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメント変更
- `style`: コードスタイル変更
- `refactor`: リファクタリング
- `test`: テスト追加・修正
- `chore`: ビルド・ツール変更

---

## /review-architecture

アーキテクチャを包括的にレビューしてレポートを出力する。

**使用方法:**
```
/review-architecture
```

**レビュー項目:**
1. プロジェクト概要の把握
2. ディレクトリ構造の分析
3. 依存関係とモジュール構造
4. コード品質と一貫性
5. テストカバレッジ
6. セキュリティと設定

**出力:**
Markdown形式のレビューレポート（改善提案付き）

**注意:** このコマンドは読み取り専用で、コードの変更は行いません。

---

## /gen-docs

ソースコードを解析してドキュメントを生成・更新する。

**使用方法:**
```
/gen-docs [オプション]
```

**オプション:**
- `--full`: 全ドキュメントを再生成
- `--dry-run`: 更新計画のみ表示
- `--file <name>`: 特定のドキュメントのみ更新
  - architecture, api-reference, usage-guide, code-patterns

**生成ファイル:**
- `docs/architecture.md`: アーキテクチャ概要
- `docs/api-reference/`: APIリファレンス
- `docs/usage-guide/`: 使い方ガイド
- `docs/code-patterns/`: コーディングパターン

**更新判定:**
各ドキュメントのフロントマターに`source_hash`が保存されており、ソースファイルのハッシュと比較して更新が必要かどうかを判定します。

---

## /save-article

指定URLの記事を取得してMarkdownで保存する。

**使用方法:**
```
/save-article <URL>
```

**例:**
```
/save-article https://example.com/article
```

**処理:**
1. URLから記事を取得
2. 英語の場合は日本語に翻訳
3. Markdown形式で保存

**保存先:**
```
repositories/articles/<ディレクトリ名>/
├── article.md      # 記事本文
└── source.txt      # 元URL
```
