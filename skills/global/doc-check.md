---
name: doc-check
description: ドキュメント整合性チェック。コード変更時にドキュメントの更新漏れがないか確認する。
---

# ドキュメント整合性チェック

コード変更時にドキュメントの整合性を確認する。

## Stage 1: 軽量チェック（必須）

以下のファイルを読み、変更内容との整合性を確認：

- `CLAUDE.md`（存在する場合）- プロジェクト指示書
- `README.md`（ルート、存在する場合）
- 変更ファイルと同じディレクトリの `*.md` ファイル

## Stage 2: 関連性チェック（変更内容に応じて）

変更の種類に応じて追加チェック：

| 変更の種類 | チェック対象 |
|-----------|-------------|
| API/関数シグネチャ変更 | 関連するドキュメントを探索 |
| 新規ファイル追加 | ディレクトリ構成の記載確認 |
| 設定/環境変数変更 | 設定ドキュメントの確認 |
| コマンド追加/変更 | 使用例やヘルプの確認 |

## Stage 3: skills/docs/ チェック（コード変更時）

`skills/docs/`が存在する場合、以下の対応表に基づいてドキュメント更新の必要性を確認：

| 変更の種類 | 確認対象ドキュメント |
|-----------|-------------------|
| 公開関数のシグネチャ変更 | `skills/docs/api-reference.md` |
| 新規モジュール/ディレクトリ追加 | `skills/docs/architecture.md` |
| CLI引数/コマンド変更 | `skills/docs/usage-guide.md` |
| 新しいコーディングパターン導入 | `skills/docs/code-patterns.md` |

ドキュメント更新が必要な場合、`/gen-docs`の実行を推奨：
```
skills/docs/の更新が必要です。
`/gen-docs`を実行してドキュメントを更新してください。
```

## チェック観点

- [ ] 変更したコードに関連するドキュメントは更新されているか
- [ ] 既存ドキュメントの記載と矛盾する変更はないか
- [ ] 新規追加した機能/ファイルはドキュメントに反映されているか
- [ ] skills/docs/のドキュメントは最新の状態か

## 問題検出時

問題を発見した場合：

1. 具体的な問題箇所を指摘する
2. 修正案を提案する
3. 修正を実施するか、ユーザーに判断を仰ぐ

例：
```
### ドキュメント整合性の問題

**問題**: CLAUDE.mdの更新漏れ
- 新規追加した `src/utils/helper.ts` がディレクトリ構成に記載されていません

**修正案**:
CLAUDE.mdのディレクトリ構成セクションに以下を追加：
├── utils/             # ユーティリティ関数
```
