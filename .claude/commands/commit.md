# コミットとプッシュ

現在のブランチで変更をレビューし、コミット・プッシュします。

**重要: ドキュメント整合性チェックで問題を検出した場合は、コミットせずに停止してください。**

## 手順

### 1. 変更内容の確認

以下のコマンドを実行して変更状況を把握：

```bash
git status
git diff
git diff --cached
git log --oneline -5
```

### 2. ドキュメント整合性チェック

#### Stage 1: 軽量チェック（必須）

以下のファイルを読み、変更内容との整合性を確認：

- `CLAUDE.md`（存在する場合）- プロジェクト指示書
- `README.md`（ルート、存在する場合）
- 変更ファイルと同じディレクトリの `*.md` ファイル

#### Stage 2: 関連性チェック（変更内容に応じて）

変更の種類に応じて追加チェック：

| 変更の種類 | チェック対象 |
|-----------|-------------|
| API/関数シグネチャ変更 | 関連するドキュメントを探索 |
| 新規ファイル追加 | ディレクトリ構成の記載確認 |
| 設定/環境変数変更 | 設定ドキュメントの確認 |
| コマンド追加/変更 | 使用例やヘルプの確認 |

#### チェック観点

- [ ] 変更したコードに関連するドキュメントは更新されているか
- [ ] 既存ドキュメントの記載と矛盾する変更はないか
- [ ] 新規追加した機能/ファイルはドキュメントに反映されているか

### 3. 問題検出時の対応

問題を発見した場合は**必ず以下を実行**：

1. 具体的な問題箇所を指摘する
2. 修正案を提案する
3. **コミットせずに停止する**
4. ユーザーに判断を仰ぐ

例：
```
## ドキュメント整合性の問題を検出

### 問題1: CLAUDE.mdの更新漏れ
- 新規追加した `src/utils/helper.ts` がディレクトリ構成に記載されていません

### 修正案
CLAUDE.mdのディレクトリ構成セクションに以下を追加：
├── utils/             # ユーティリティ関数

コミットを続行しますか？それとも先にドキュメントを更新しますか？
```

### 4. コミット実行

問題がなければ：

1. 適切なファイルをステージング（`git add`）
2. Conventional Commits形式でコミットメッセージを作成
   - 日本語で記述
   - type: feat/fix/docs/style/refactor/test/chore
3. コミット実行（Co-Authored-Byトレーラー付与）
4. リモートにプッシュ（`git push`）
5. 結果を報告

## コミットメッセージ規約

```
<type>: <説明>

[本文（任意）]

Co-Authored-By: Claude <noreply@anthropic.com>
```

### Type一覧
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響しない変更
- `refactor`: バグ修正や機能追加ではないコード変更
- `test`: テストの追加・修正
- `chore`: ビルドプロセスやツールの変更

## 注意事項

- 機密情報（.env, credentials等）をコミットしないこと
- force pushは行わないこと
- mainブランチへの直接pushは確認を取ること
